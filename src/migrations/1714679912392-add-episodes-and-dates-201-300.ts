import { MigrationInterface, QueryRunner } from 'typeorm';

export class AddEpisodesAndDates2013001714679912392
  implements MigrationInterface
{
  public async up(queryRunner: QueryRunner): Promise<void> {
    const episodeDates = [
      '2005-06-16',
      '2005-06-23',
      '2005-06-30',
      '2005-07-07',
      '2005-07-14',
      '2005-07-21',
      '2005-07-28',
      '2005-08-04',
      '2005-08-11',
      '2005-08-18',
      '2005-08-25',
      '2005-09-01',
      '2005-09-08',
      '2005-09-15',
      '2005-09-22',
      '2005-09-29',
      '2005-10-06',
      '2005-10-13',
      '2005-10-20',
      '2005-10-27',
      '2005-11-03',
      '2005-11-10',
      '2005-11-17',
      '2005-11-24',
      '2005-12-01',
      '2005-12-08',
      '2005-12-15',
      '2005-12-22',
      '2005-12-29',
      '2006-01-05',
      '2006-01-12',
      '2006-01-19',
      '2006-01-26',
      '2006-02-02',
      '2006-02-09',
      '2006-02-16',
      '2006-02-23',
      '2006-03-02',
      '2006-03-09',
      '2006-03-16',
      '2006-03-23',
      '2006-03-30',
      '2006-04-06',
      '2006-04-13',
      '2006-04-20',
      '2006-04-27',
      '2006-05-04',
      '2006-05-11',
      '2006-05-18',
      '2006-05-25',
      '2006-06-01',
      '2006-06-08',
      '2006-06-15',
      '2006-06-22',
      '2006-06-29',
      '2006-07-06',
      '2006-07-13',
      '2006-07-20',
      '2006-07-27',
      '2006-08-03',
      '2006-08-10',
      '2006-08-17',
      '2006-08-24',
      '2006-08-31',
      '2006-09-07',
      '2006-09-14',
      '2006-09-21',
      '2006-09-28',
      '2006-10-05',
      '2006-10-12',
      '2006-10-19',
      '2006-10-26',
      '2006-11-02',
      '2006-11-09',
      '2006-11-17',
      '2006-11-23',
      '2006-11-30',
      '2006-12-07',
      '2006-12-14',
      '2006-12-21',
      '2006-12-28',
      '2007-01-04',
      '2007-01-11',
      '2007-01-18',
      '2007-01-25',
      '2007-02-01',
      '2007-02-08',
      '2007-02-15',
      '2007-02-22',
      '2007-03-01',
      '2007-03-08',
      '2007-03-15',
      '2007-03-22',
      '2007-03-29',
      '2007-04-05',
      '2007-04-12',
      '2007-04-19',
      '2007-04-26',
      '2007-05-03',
      '2007-05-10',
    ];

    if (episodeDates.length < 100) {
      throw new Error('not enough episodes');
    }

    for (let i = 0; i < 100; i++) {
      const episode = (i + 201).toString().padStart(3, '0');
      const episodeDate = episodeDates[i];

      await queryRunner.query(
        `INSERT INTO episode (episode, date) VALUES ($1, $2)`,
        [episode, episodeDate],
      );
    }
  }

  public async down(queryRunner: QueryRunner): Promise<void> {
    await queryRunner.query(`DELETE FROM episode`);
  }
}
