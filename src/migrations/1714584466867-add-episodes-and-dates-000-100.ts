import { MigrationInterface, QueryRunner } from 'typeorm';

export class AddEpisodesAndDates0001001714584466867
  implements MigrationInterface
{
  public async up(queryRunner: QueryRunner): Promise<void> {
    const episodeDates = [
      '2001-05-18',
      '2001-06-01',
      '2001-06-08',
      '2001-06-15',
      '2001-06-22',
      '2001-06-29',
      '2001-07-20',
      '2001-07-27',
      '2001-08-03',
      '2001-08-10',
      '2001-08-17',
      '2001-08-24',
      '2001-09-07',
      '2001-09-14',
      '2001-09-21',
      '2001-09-28',
      '2001-10-05',
      '2001-10-11',
      '2001-10-18',
      '2001-10-25',
      '2001-11-01',
      '2001-11-08',
      '2001-11-15',
      '2001-11-22',
      '2001-11-29',
      '2001-12-06',
      '2001-12-13',
      '2001-12-20',
      '2001-12-27',
      '2002-01-03',
      '2002-01-10',
      '2002-01-17',
      '2002-01-24',
      '2002-01-31',
      '2002-02-07',
      '2002-02-14',
      '2002-02-21',
      '2002-02-28',
      '2002-03-07',
      '2002-03-14',
      '2002-03-21',
      '2002-03-28',
      '2002-04-04',
      '2002-04-11',
      '2002-04-18',
      '2002-04-25',
      '2002-05-02',
      '2002-05-09',
      '2002-05-16',
      '2002-05-23',
      '2002-05-30',
      '2002-06-06',
      '2002-06-13',
      '2002-06-27',
      '2002-07-04',
      '2002-07-11',
      '2002-07-18',
      '2002-08-01',
      '2002-08-08',
      '2002-08-15',
      '2002-08-22',
      '2002-08-29',
      '2002-09-05',
      '2002-09-12',
      '2002-09-19',
      '2002-09-26',
      '2002-10-03',
      '2002-10-10',
      '2002-10-17',
      '2002-10-24',
      '2002-10-31',
      '2002-11-07',
      '2002-11-14',
      '2002-11-21',
      '2002-11-28',
      '2002-12-05',
      '2002-12-12',
      '2002-12-19',
      '2002-12-26',
      '2003-01-02',
      '2003-01-16',
      '2003-01-23',
      '2003-01-30',
      '2003-02-06',
      '2003-02-13',
      '2003-02-20',
      '2003-02-27',
      '2003-03-06',
      '2003-03-13',
      '2003-03-20',
      '2003-03-27',
      '2003-04-03',
      '2003-04-10',
      '2003-04-17',
      '2003-04-24',
      '2003-05-01',
      '2003-05-08',
      '2003-05-15',
      '2003-05-22',
      '2003-05-29',
      '2003-06-05',
    ];

    if (episodeDates.length < 101) {
      throw new Error('not enough episodes');
    }

    for (let i = 0; i < 101; i++) {
      const episode = i.toString().padStart(3, '0');
      const episodeDate = episodeDates[i];

      await queryRunner.query(
        `INSERT INTO episode (episode, date) VALUES ($1, $2)`,
        [episode, episodeDate],
      );
    }
  }

  public async down(queryRunner: QueryRunner): Promise<void> {
    await queryRunner.query(`DELETE FROM episode`);
  }
}
